# 装甲车辆抗毁伤数字化评估软件平台
## 产品需求文档 (PRD)

**版本：** 1.0  
**日期：** 2025年3月  
**开发机构：** 沈阳理工大学  
**文档类型：** 产品需求文档  

---

## 1. 项目概述

### 1.1 项目背景
装甲车辆抗毁伤数字化评估软件平台是一款专业的军工仿真分析软件，主要用于评估装甲车辆在不同毁伤机制下的抗毁伤能力。该软件集成了多种毁伤仿真算法，为装甲车辆的防护性能评估提供数字化解决方案。

### 1.2 产品定位
- **目标用户：** 军工科研院所、高等院校相关专业研究人员
- **应用场景：** 装甲车辆防护性能评估、毁伤机理研究、防护方案优化
- **核心价值：** 提供高精度的毁伤仿真计算和直观的可视化分析

### 1.3 项目目标
- 建立标准化的装甲车辆抗毁伤评估流程
- 提供高效的仿真建模和计算平台
- 实现多种毁伤机制的统一分析框架
- 建立完善的材料数据库和模型库

## 2. 技术架构

### 2.1 技术栈选择
- **开发框架：** .NET 8.0 Windows Desktop Application
- **UI框架：** WPF (Windows Presentation Foundation)
- **架构模式：** MVVM (Model-View-ViewModel)
- **数据库：** SQLite 3.x
- **ORM框架：** Entity Framework Core
- **依赖注入：** Microsoft.Extensions.DependencyInjection
- **日志框架：** NLog
- **仿真求解器：** LS-DYNA, TG运行程序

### 2.2 系统架构设计
```
装甲车辆抗毁伤评估软件
├── 表示层 (Presentation Layer)
│   ├── 主界面模块
│   ├── 算例管理模块
│   └── 仿真模块界面
├── 业务逻辑层 (Business Logic Layer)
│   ├── 算例管理服务
│   ├── 仿真计算服务
│   ├── 材料库管理服务
│   └── 模型库管理服务
├── 数据访问层 (Data Access Layer)
│   ├── 算例数据仓储
│   ├── 材料数据仓储
│   └── 配置数据仓储
└── 基础设施层 (Infrastructure Layer)
    ├── 外部求解器接口
    ├── 文件系统管理
    └── 日志记录服务
```

## 3. 功能需求规格说明

### 3.1 核心功能模块

#### 3.1.1 用户认证模块
- **功能描述：** 提供用户登录验证功能
- **主要功能：**
  - 用户身份验证
  - 权限管理
  - 会话管理

#### 3.1.2 算例管理模块
- **功能描述：** 管理所有仿真算例的生命周期
- **主要功能：**
  - 算例新增、编辑、删除
  - 算例列表查看和筛选
  - 批量操作管理
  - 工作目录管理

#### 3.1.3 毁伤仿真模块
包含三个子模块：
- **动能穿甲毁伤仿真**
- **射流破甲毁伤仿真**
- **爆炸冲击毁伤仿真**

#### 3.1.4 数据库管理模块
- **功能描述：** 管理材料库、模型库等基础数据
- **主要功能：**
  - 材料数据库管理
  - 车辆模型库管理
  - 制式弹模型库管理

### 3.2 详细功能规格

#### 3.2.1 首页功能
| 功能项 | 功能描述 | 优先级 |
|--------|----------|--------|
| 算例列表显示 | 分页显示所有算例，包含序号、名称、类型、状态、创建时间等信息 | P0 |
| 系统设置 | 配置TG运行程序、LS-DYNA求解器、LS-PrePos软件路径 | P0 |
| 新增算例 | 支持创建新的仿真算例 | P0 |
| 批量删除 | 支持选择多个算例进行批量删除操作 | P1 |
| 算例操作 | 对单个算例进行查看、编辑、删除、打开路径操作 | P0 |

#### 3.2.2 动能穿甲毁伤仿真模块

##### 3.2.2.1 项目信息管理
- **功能描述：** 显示和编辑算例基本信息
- **数据字段：**
  - 算例名称
  - 算例类型（动能穿甲/聚能破甲/爆炸冲击）
  - 工作路径
  - 创建时间
  - 算例状态（未计算/计算中/计算完成/计算错误）
  - 描述信息

##### 3.2.2.2 材料模型管理
- **功能描述：** 管理仿真所需的材料模型
- **主要功能：**
  - 材料导入（从材料库选择）
  - 材料参数编辑
  - 材料删除（检查使用状态）
- **数据结构：**
  - 材料名称
  - 本构方程参数
  - 状态方程参数

##### 3.2.2.3 目标建模
- **功能描述：** 构建被攻击目标的仿真模型
- **建模类型：**
  1. **等效靶模型**
     - 等效靶层数设置
     - 网格尺寸配置
     - 每层几何参数（长、宽、厚度）
     - 材料选择
  2. **整车模型**
     - 车辆选择（从模型库）
     - 车辆模型库管理
     - 部件组成列表
     - 各部件材料设置
     - 模型平移和旋转

##### 3.2.2.4 穿甲战斗部建模
- **功能描述：** 构建攻击弹体的仿真模型
- **建模类型：**
  1. **参数化弹体模型**
     - 弹体类型选择（圆柱/截锥/卵形弹）
     - 几何结构参数设置
       - 圆柱：底半径、长度
       - 截锥：上底半径、下底半径、长度
       - 卵形弹：CRH参数
     - 弹体材料设定
     - 模型平移和旋转
  2. **制式弹模型**
     - 制式弹选择（从模型库）
     - 制式弹模型库管理
     - Part组成列表
     - 各部件材料选择
     - 模型平移和旋转

##### 3.2.2.5 仿真控制参数
- **功能描述：** 配置仿真计算的控制参数
- **参数设置：**
  - 时间步长
  - 接触强度
  - 其他仿真控制参数（根据实际需求扩展）

##### 3.2.2.6 仿真计算
- **功能描述：** 执行仿真计算任务
- **主要功能：**
  - 计算参数配置
  - 计算任务提交
  - 计算状态监控
  - 计算结果管理

##### 3.2.2.7 计算结果分析
- **功能描述：** 展示和分析仿真计算结果
- **主要功能：**
  - 结果数据展示
  - 可视化分析
  - 结果导出

##### 3.2.2.8 计算报告生成
- **功能描述：** 自动生成标准化的计算报告
- **报告内容：**
  - 仿真模型概述
  - 计算参数汇总
  - 结果数据分析
  - 图表展示

## 4. 非功能性需求

### 4.1 性能需求
- **响应时间：** 界面操作响应时间 < 1秒
- **计算能力：** 支持大规模有限元模型计算（节点数 > 100万）
- **并发处理：** 支持多个仿真任务并发计算
- **内存使用：** 软件运行内存占用 < 4GB

### 4.2 可靠性需求
- **数据安全：** 提供数据备份和恢复机制
- **异常处理：** 完善的错误处理和用户提示
- **计算稳定性：** 计算过程异常中断后可恢复
- **数据一致性：** 确保数据库操作的事务一致性

### 4.3 可用性需求
- **界面友好：** 符合Windows桌面应用设计规范
- **操作简便：** 提供向导式操作流程
- **帮助文档：** 完整的用户操作手册
- **快捷操作：** 支持常用功能的快捷键

### 4.4 兼容性需求
- **操作系统：** Windows 10/11 (64位)
- **.NET版本：** .NET 8.0 Runtime
- **求解器兼容：** LS-DYNA, TG运行程序
- **后处理软件：** LS-PrePost

### 4.5 安全性需求
- **访问控制：** 基于角色的权限管理
- **数据加密：** 敏感数据加密存储
- **审计日志：** 记录用户操作日志
- **软件安全：** 防止恶意代码注入

## 5. 用户界面设计要求

### 5.1 界面设计原则
- **一致性：** 统一的视觉风格和交互模式
- **专业性：** 符合科研软件的专业特色
- **易用性：** 直观的操作流程和清晰的信息层次
- **效率性：** 快速完成常用操作

### 5.2 界面布局规范
- **主色调：** 深蓝色系，体现专业性
- **辅助色：** 灰色系用于背景和边框
- **强调色：** 橙色用于按钮和重要提示
- **字体：** Microsoft YaHei UI，保证中文显示效果

### 5.3 控件使用规范
- **按钮：** 统一的按钮样式，区分主要和次要操作
- **表格：** 支持排序、筛选和分页功能
- **表单：** 清晰的标签和验证提示
- **对话框：** 模态对话框用于重要操作确认

### 5.4 响应式设计
- **窗口缩放：** 支持窗口大小调整
- **分辨率适配：** 适配不同分辨率显示器
- **高DPI支持：** 支持高DPI显示设备

## 6. 数据模型设计

### 6.1 核心实体设计

#### 6.1.1 算例实体 (SimulationCase)
```csharp
public class SimulationCase
{
    public int Id { get; set; }
    public string Name { get; set; }
    public SimulationType Type { get; set; }
    public string WorkingPath { get; set; }
    public DateTime CreatedTime { get; set; }
    public SimulationStatus Status { get; set; }
    public string Description { get; set; }
    public string CreatedBy { get; set; }
}

public enum SimulationType
{
    KineticPenetration = 1,    // 动能穿甲
    ShapedCharge = 2,          // 聚能破甲  
    ExplosiveImpact = 3        // 爆炸冲击
}

public enum SimulationStatus
{
    NotCalculated = 0,         // 未计算
    Calculating = 1,           // 计算中
    Completed = 2,             // 计算完成
    Error = 3                  // 计算错误
}
```

#### 6.1.2 材料实体 (Material)
```csharp
public class Material
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string ConstitutiveEquation { get; set; }    // 本构方程
    public string EquationOfState { get; set; }         // 状态方程
    public string Parameters { get; set; }              // JSON格式参数
    public bool IsBuiltIn { get; set; }                 // 是否内置材料
    public DateTime CreatedTime { get; set; }
}
```

#### 6.1.3 模型实体 (Model)
```csharp
public class Model
{
    public int Id { get; set; }
    public string Name { get; set; }
    public ModelType Type { get; set; }
    public string FilePath { get; set; }
    public string Parameters { get; set; }              // JSON格式参数
    public string Description { get; set; }
    public DateTime CreatedTime { get; set; }
}

public enum ModelType
{
    Vehicle = 1,               // 车辆模型
    StandardProjectile = 2,    // 制式弹模型
    TargetPlate = 3           // 靶板模型
}
```

### 6.2 数据库设计原则
- **规范化：** 满足第三范式要求
- **索引优化：** 为查询频繁的字段建立索引
- **数据完整性：** 设置合适的约束条件
- **版本控制：** 支持数据库架构版本管理

## 7. 系统集成需求

### 7.1 外部系统集成
- **LS-DYNA求解器：** 通过命令行接口调用
- **TG运行程序：** 集成专用计算内核
- **LS-PrePost：** 结果后处理和可视化
- **CAD软件：** 支持主流CAD格式导入

### 7.2 文件格式支持
- **输入格式：** STL, STEP, IGES, K文件
- **输出格式：** CSV, Excel, PDF报告
- **数据交换：** JSON, XML格式

### 7.3 API接口设计
```csharp
// 仿真计算服务接口
public interface ISimulationService
{
    Task<bool> StartCalculationAsync(int caseId);
    Task<SimulationStatus> GetCalculationStatusAsync(int caseId);
    Task<SimulationResult> GetCalculationResultAsync(int caseId);
    Task<bool> CancelCalculationAsync(int caseId);
}

// 模型管理服务接口
public interface IModelManagementService
{
    Task<List<Model>> GetModelsAsync(ModelType type);
    Task<Model> ImportModelAsync(string filePath, ModelType type);
    Task<bool> DeleteModelAsync(int modelId);
}
```

## 8. 开发计划和里程碑

### 8.1 开发阶段规划

#### 第一阶段：基础架构开发 (4周)
- 项目架构搭建
- 数据库设计和实现
- 基础UI框架搭建
- 用户认证模块开发

#### 第二阶段：核心功能开发 (8周)
- 算例管理模块开发
- 动能穿甲仿真模块开发
- 材料库和模型库开发
- 仿真计算引擎集成

#### 第三阶段：扩展功能开发 (6周)
- 射流破甲仿真模块开发
- 爆炸冲击仿真模块开发
- 结果分析和报告生成
- 系统优化和性能调优

#### 第四阶段：测试和发布 (4周)
- 单元测试和集成测试
- 用户验收测试
- 文档编写和培训材料
- 软件打包和部署

### 8.2 关键里程碑
- **M1：** 基础架构完成 (Week 4)
- **M2：** 动能穿甲模块完成 (Week 8)
- **M3：** 三个仿真模块全部完成 (Week 14)
- **M4：** 软件测试完成 (Week 18)
- **M5：** 软件正式发布 (Week 20)

## 9. 质量保证和测试策略

### 9.1 测试策略
- **单元测试：** 覆盖率 ≥ 80%
- **集成测试：** 模块间接口测试
- **系统测试：** 端到端功能测试
- **性能测试：** 负载和压力测试
- **用户验收测试：** 真实使用场景验证

### 9.2 质量标准
- **代码质量：** 遵循C#编码规范
- **文档质量：** 完整的技术文档和用户手册
- **界面质量：** 符合Windows应用设计规范
- **数据质量：** 数据完整性和一致性检查

### 9.3 风险管理
- **技术风险：** 求解器集成复杂性
- **性能风险：** 大规模计算性能优化
- **兼容性风险：** 不同版本求解器兼容
- **用户接受度风险：** 界面易用性和学习成本

## 10. 部署和维护

### 10.1 部署要求
- **安装包：** MSI安装程序，支持静默安装
- **依赖检查：** 自动检测.NET运行时环境
- **配置管理：** 支持配置文件导入导出
- **许可管理：** 软件授权和激活机制

### 10.2 维护策略
- **版本更新：** 支持增量更新机制
- **问题追踪：** 集成错误报告和日志收集
- **用户支持：** 提供技术支持和培训服务
- **持续改进：** 根据用户反馈持续优化

---

## 附录

### A. 术语表
- **动能穿甲：** 利用弹体动能穿透装甲的毁伤机制
- **聚能破甲：** 利用聚能装药形成金属射流的毁伤机制
- **爆炸冲击：** 利用爆炸冲击波的毁伤机制
- **LS-DYNA：** 有限元分析软件，专用于非线性动力学分析
- **等效靶：** 简化的多层装甲靶板模型

### B. 参考资料
- LS-DYNA用户手册
- Windows应用程序设计指南
- .NET开发最佳实践
- 军工软件开发规范

### C. 变更记录
| 版本 | 日期 | 变更内容 | 变更人 |
|------|------|----------|--------|
| 1.0 | 2025-03-XX | 初始版本创建 | 项目组 |

---

## 开发状态 (Development Status)

### 已完成模块 ✅

#### 1. 用户认证模块
- **开发状态**: ✅ 已完成
- **完成时间**: 2025-03-XX
- **实现功能**:
  - ✅ 用户身份验证
  - ✅ 权限管理 
  - ✅ 会话管理
  - ✅ 密码加密存储
  - ✅ 登录失败锁定机制
- **技术实现**:
  - 使用SHA256进行密码哈希
  - 实现盐值机制增强安全性
  - 支持账户锁定和解锁
  - 完整的用户管理功能

#### 2. 算例管理模块  
- **开发状态**: ✅ 已完成
- **完成时间**: 2025-03-XX
- **实现功能**:
  - ✅ 算例新增、编辑、删除
  - ✅ 算例列表查看和筛选
  - ✅ 批量操作管理
  - ✅ 工作目录管理
  - ✅ 分页显示和搜索功能
- **技术实现**:
  - MVVM架构模式
  - Entity Framework Core数据访问
  - 完整的CRUD操作
  - 数据验证和错误处理

#### 3. 基础架构和数据库
- **开发状态**: ✅ 已完成  
- **完成时间**: 2025-03-XX
- **实现功能**:
  - ✅ SQLite数据库配置
  - ✅ Entity Framework Core集成
  - ✅ 依赖注入框架
  - ✅ 日志记录系统
  - ✅ 配置管理
- **技术实现**:
  - 分层架构设计
  - 仓储模式实现
  - NLog日志框架
  - Microsoft.Extensions.Hosting

#### 4. 主界面和导航
- **开发状态**: ✅ 已完成
- **完成时间**: 2025-03-XX  
- **实现功能**:
  - ✅ 现代化WPF界面
  - ✅ 响应式布局设计
  - ✅ 统一的设计系统
  - ✅ 专业的军工软件风格
  - ✅ 主菜单和工具栏
  - ✅ 状态栏和进度指示
- **技术实现**:
  - WPF + XAML界面
  - Material Design风格
  - 自定义控件和样式
  - 数据绑定和命令模式

### 待开发模块 🔄

#### 1. 动能穿甲毁伤仿真模块
- **开发状态**: 📋 待开发
- **预计时间**: 2-3周
- **功能范围**:
  - 项目信息管理
  - 材料模型管理
  - 目标建模 (等效靶/整车模型)
  - 穿甲战斗部建模
  - 仿真控制参数
  - 计算执行和结果分析
  - 报告生成

#### 2. 射流破甲毁伤仿真模块
- **开发状态**: 📋 待开发
- **预计时间**: 2-3周
- **功能范围**: 与动能穿甲类似，针对聚能装药特点

#### 3. 爆炸冲击毁伤仿真模块  
- **开发状态**: 📋 待开发
- **预计时间**: 2-3周
- **功能范围**: 爆炸冲击波仿真分析

#### 4. 数据库管理模块
- **开发状态**: 📋 待开发
- **预计时间**: 1-2周
- **功能范围**:
  - 材料数据库管理
  - 车辆模型库管理  
  - 制式弹模型库管理

### 技术架构总结

```
已实现的技术栈:
✅ .NET 8.0 Windows Desktop Application
✅ WPF (Windows Presentation Foundation) 
✅ MVVM (Model-View-ViewModel)
✅ SQLite 3.x + Entity Framework Core
✅ Microsoft.Extensions.DependencyInjection
✅ NLog日志框架
✅ CommunityToolkit.Mvvm

待集成的外部组件:
🔄 LS-DYNA求解器接口
🔄 TG运行程序集成
🔄 LS-PrePost后处理集成
```

### 项目文件结构

```
ArmorVehicleDamageAssessment/ (✅ 已建立)
├── src/
│   ├── ArmorVehicleDamageAssessment.Core/      (✅ 核心业务逻辑)
│   ├── ArmorVehicleDamageAssessment.Data/      (✅ 数据访问层)
│   ├── ArmorVehicleDamageAssessment.UI/        (✅ 用户界面层)
│   └── ArmorVehicleDamageAssessment.Common/    (✅ 公共工具类)
├── tests/                                      (📋 测试框架已建立)
├── database/                                   (✅ 数据库脚本)
└── README.md                                   (✅ 项目文档)
```

### 开发进度总结

- **总体进度**: 40% 完成
- **用户认证模块**: ✅ 100% 完成
- **算例管理模块**: ✅ 100% 完成  
- **基础架构**: ✅ 100% 完成
- **主界面**: ✅ 100% 完成
- **仿真计算模块**: 🔄 0% (待开发)
- **数据库管理**: 🔄 0% (待开发)

### 下一阶段开发计划

1. **Phase 2A (2-3周)**: 动能穿甲仿真模块开发
2. **Phase 2B (2-3周)**: 射流破甲仿真模块开发  
3. **Phase 2C (2-3周)**: 爆炸冲击仿真模块开发
4. **Phase 3 (1-2周)**: 数据库管理模块开发
5. **Phase 4 (1-2周)**: 系统集成测试和优化

### 技术债务和改进项

1. **性能优化**: 大数据量时的界面响应性
2. **错误处理**: 更完善的异常处理机制
3. **用户体验**: 操作向导和帮助系统
4. **测试覆盖**: 单元测试和集成测试完善
5. **文档完善**: 用户手册和技术文档

---

**文档状态：** ✅ 第一阶段开发完成  
**更新时间：** 2025-03-XX  
**开发负责人：** 开发团队  
**下次里程碑：** 动能穿甲仿真模块开发
